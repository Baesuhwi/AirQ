<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yjc.airq.mapper.ProductMapper">
	<select id="productList" resultType="com.yjc.airq.domain.ProductVO">
		<![CDATA[ 
			select X.rnum, X.* from(select rownum as rnum, A.* from (select * from product) A where rownum <= #{endnum}) X where X.rnum >= #{startnum}
		]]> 
	</select>
	<select id="productCount" resultType="int">
		select count(*) from product
	</select>
	<select id="selectList" resultType="com.yjc.airq.domain.ProductVO">
		<![CDATA[ 
			select X.rnum,X.* 
			from(
    				select rownum as rnum, A.* 
    				from(
            				select product_code,product_name,product_detail,product_price,p_space,measure_point,company_code 
            				from (
                    				select p.*,a.* 
                    				from product p, area a, p_possible_area pa
                    				where p.product_code = pa.product_code and pa.area_code = a.area_code and a.area_do=#{sido} and a.area_si=#{sigoon} and p.p_space=#{space})) A
    				where rownum <= #{endnum}) X
			where X.rnum >= #{startnum}
        ]]> 
	</select>
	<select id="selectCount" resultType="int">
		select count(*)
		from product p, area a, p_possible_area pa
		where p.product_code = pa.product_code and pa.area_code = a.area_code and a.area_do=#{sido} and a.area_si=#{sigoon} and p.p_space=#{space}
	</select>
</mapper>